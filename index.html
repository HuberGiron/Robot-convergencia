<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Robot Móvil - Simulación</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>Modelo Cinemático Robot Móvil</h1>
  <h2>Convergencia Uniciclo</h2>
  
  <div class="controls">
    <div class="variable-inputs">
      <label for="startX">X Inicial (mm):</label>
      <input type="number" id="startX" value="-100">
      <label for="startY">Y Inicial (mm):</label>
      <input type="number" id="startY" value="-100">
      <label for="angle">Ángulo Inicial (°):</label>
      <input type="number" id="angle" value="0" step="1">
      <label for="endX">X Final deseada (mm):</label>
      <input type="number" id="endX" value="100">
      <label for="endY">Y Final deseada (mm):</label>
      <input type="number" id="endY" value="100">
    </div>
    <div class="constant-inputs">
      <label for="k" class="constant-label">Ganancia K:</label>
      <input type="number" id="k" value="0.5" step="0.01">
      <label for="l" class="constant-label">Distancia l (mm):</label>
      <input type="number" id="l" value="50" step="1">
      <label for="dt" class="constant-label">Tiempo dt (s):</label>
      <input type="number" id="dt" value="0.05" step="0.01">
    </div>
    <div class="button-controls">
      <button id="animateBtn" class="control-button">
        <span id="animateIcon">&#9658;</span> Iniciar y Pausa
      </button>
      <button id="restartBtn" class="control-button">
        <span id="restartIcon">&#8635;</span> Reiniciar
      </button>
    </div>
  </div>
  
  <div id="cycleCounter">Ciclos: 0 - Tiempo: 0.00 s</div>
  
  <div class="canvas-container">
    <canvas id="robotCanvas"></canvas>
  </div>
  
  <!-- Panel para mostrar información en tiempo real del robot -->
  <div id="robotInfo"></div>
  
  <div class="chart-section">
    <h3>Error vs Tiempo</h3>
    <div class="chart-container">
      <canvas id="errorChart"></canvas>
    </div>
    <div class="download-buttons">
      <button onclick="downloadChart(errorChart, 'errorChart')">Descargar Gráfica</button>
      <button onclick="downloadCSVForChart('error')">Descargar CSV</button>
    </div>
  </div>
  
  <div class="chart-section">
    <h3>Posición vs Tiempo</h3>
    <div class="chart-container">
      <canvas id="positionChart"></canvas>
    </div>
    <div class="download-buttons">
      <button onclick="downloadChart(positionChart, 'positionChart')">Descargar Gráfica</button>
      <button onclick="downloadCSVForChart('position')">Descargar CSV</button>
    </div>
  </div>
  
  <div class="chart-section">
    <h3>Control vs Tiempo</h3>
    <div class="chart-container">
      <canvas id="controlChart"></canvas>
    </div>
    <div class="download-buttons">
      <button onclick="downloadChart(controlChart, 'controlChart')">Descargar Gráfica</button>
      <button onclick="downloadCSVForChart('control')">Descargar CSV</button>
    </div>
  </div>
  
  <!-- Librería Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Nuestros scripts -->
  <script src="robot.js"></script>
  <script src="charts.js"></script>
  <script src="canvas.js"></script>
</body>
</html>
